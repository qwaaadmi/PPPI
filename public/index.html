<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Karaoke</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { background: #0f0f1a; color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        
        /* –ï–∫—Ä–∞–Ω–∏ */
        .screen { display: none; width: 100%; height: 100%; flex-direction: column; align-items: center; justify-content: center; }
        .active { display: flex; }

        /* –õ–æ–≥—ñ–Ω */
        input, button { padding: 12px; margin: 10px; border-radius: 8px; border: none; font-size: 16px; }
        button { background: #ff0055; color: white; cursor: pointer; font-weight: bold; transition: 0.3s; }
        button:hover { transform: scale(1.05); }

        /* –ü–ª–µ—î—Ä —ñ —Å–ø–∏—Å–æ–∫ */
        .main-layout { display: flex; width: 95%; height: 90%; gap: 20px; margin-top: 20px; }
        
        /* –õ—ñ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ - –°–ø–∏—Å–æ–∫ –ø—ñ—Å–µ–Ω—å */
        .sidebar { width: 300px; background: #1a1a2e; padding: 15px; border-radius: 15px; overflow-y: auto; }
        .song-item { padding: 10px; background: #262640; margin-bottom: 10px; border-radius: 8px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 10px; }
        .song-item:hover { background: #ff0055; }
        .song-item img { width: 40px; height: 40px; border-radius: 5px; object-fit: cover; }

        /* –ü—Ä–∞–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ - –í—ñ–¥–µ–æ —ñ –¢–µ–∫—Å—Ç */
        .stage { flex: 1; display: flex; flex-direction: column; align-items: center; position: center; }
        
        #player-wrapper { width: 60%; aspect-ratio: 16/9; margin-bottom: 20px; border-radius: 15px; overflow: hidden; box-shadow: 0 0 30px rgba(0,0,0,0.5); z-index: 10; }
        
         /* –ö–ê–†–ê–û–ö–ï –¢–ï–ö–°–¢ */
        #lyrics-box {
            width: 80%;
            height: 300px;
            overflow-y: auto;
            text-align: center;
            position: relative;
            scroll-behavior: smooth;
            mask-image: linear-gradient(transparent, black 20%, black 50%, black 80%, transparent);
            -webkit-mask-image: linear-gradient(transparent, black 20%, black 50%, black 80%, transparent);
        }
        
        #lyrics-box::-webkit-scrollbar {
            display: none; /* –•–æ–≤–∞—î–º–æ —Å–∫—Ä–æ–ª–±–∞—Ä */
        }
        
        .lyric-line {
            padding: 15px;
            font-size: 20px;
            color: #555;
            transition: all 0.4s ease;
            font-weight: 500;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lyric-line.active {
            color: #ffeb3b; /* –ñ–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä—è–¥–∫–∞ */
            font-size: 36px;
            font-weight: bold;
            text-shadow: 0 0 15px rgba(255, 235, 59, 0.6);
            transform: scale(1.1);
        }

        .room-info { position: absolute; top: 10px; right: 20px; color: #888; }
    </style>
</head>
<body>

    <div id="login-screen" class="screen active">
        <h1>üé§ Karaoke Stars</h1>
        <input type="text" id="username" placeholder="–¢–≤–æ—î —ñ–º'—è">
        <input type="text" id="room" placeholder="–ù–æ–º–µ—Ä –∫—ñ–º–Ω–∞—Ç–∏">
        <button onclick="joinRoom()">–£–≤—ñ–π—Ç–∏</button>
    </div>

    <div id="app-screen" class="screen">
        <div class="room-info" id="room-display"></div>
        
        <div class="main-layout">
            <div class="sidebar" id="song-list">
                </div>

            <div class="stage">
                <div id="player-wrapper">
                    <div id="player"></div>
                </div>
                
                <div id="lyrics-box">
                    <div style="margin-top: 100px; color: #444;">–û–±–µ—Ä—ñ—Ç—å –ø—ñ—Å–Ω—é –∑—ñ —Å–ø–∏—Å–∫—É –∑–ª—ñ–≤–∞...</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // === 1. –ë–ê–ó–ê –î–ê–ù–ò–• –ü–Ü–°–ï–ù–¨ (–î–æ–¥–∞–≤–∞–π —Å—é–¥–∏ –Ω–æ–≤—ñ) ===
        const SONG_LIBRARY = [
            {
                title: "YAKTAK, Svyatoslav Vakarchuk - –ù–∞ –Ω—ñ—á–Ω–æ–º—É –Ω–µ–±—ñ",
                videoId: "TTccdFybPUo", 
                thumb: "https://img.youtube.com/vi/M5F6FqKq1tI/default.jpg",
                lyrics: [
{ time: 0, text: "–£–Ω–æ—á—ñ —è —Ç–æ–±—ñ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥ –≥—ñ—Ç–∞—Ä—É" },
{ time: 6, text: "–ó–∞—Å–ø—ñ–≤–∞—é –≤—Å—ñ —Å–≤–æ—ó –ø—ñ—Å–Ω—ñ" },
{ time: 9, text: "–†–æ–∑–∫–∞–∂–∏, —á–æ–º—É –ª–∏—à–µ –ø—Ä–æ —Ç–µ–±–µ" },
{ time: 12, text: "–ù–∞–ø–∏—Å–∞–Ω—ñ –≤–æ–Ω–∏" },
{ time: 14, text: "–Ø —Ç–æ–±—ñ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥ –≥—ñ—Ç–∞—Ä—É" },
{ time: 18, text: "–ó–∞—Å–ø—ñ–≤–∞—é –∞–∂ –¥–æ —Ç–µ–º–Ω–æ—Ç–∏" },
{ time: 21, text: "–Ø–∫ –∑—ñ–∑–Ω–∞—Ç–∏—Å—è –≤ —Ü—å–æ–º—É, –Ω–µ –∑–Ω–∞—é" },
{ time: 25, text: "–©–æ —è –Ω–∞ –Ω–µ–±—ñ, –º–∏–ª–∞ –º–æ—è, –Ω–∞ –Ω–µ–±—ñ" },
{ time: 30, text: "–ó–æ—Ä–µ –º–æ—è, –Ω–∞ –Ω–µ–±—ñ, –≤—ñ–¥–∫–æ–ª–∏ —Ç–µ–±–µ –∑–Ω–∞–π—à–æ–≤" },
{ time: 37, text: "–Ü —è –Ω–∞ –Ω–µ–±—ñ, –º–æ–≤ –Ω–∞ –∑–µ–º–Ω–æ–º—É –Ω–µ–±—ñ" },
{ time: 43, text: "–ú–∏–ª–∞, –∫–æ–ª–∏ –∑ —Ç–æ–±–æ—é, –ª—ñ—Ç–∞—é —ñ –∑–Ω–æ–≤, —ñ –∑–Ω–æ–≤" },
{ time: 50, text: "–¢–∞–º, –¥–µ –¥–ª—è –∫–æ–≥–æ—Å—å —Ç—ñ–ª—å–∫–∏ –ª—é—Ç–∏–π –∑–∞ –≤—ñ–∫–Ω–æ–º" },
{ time: 56, text: "–ù–∞ –º–æ—ó–π –≤—É–ª–∏—Ü—ñ –¥–∞–≤–Ω–æ —É–∂–µ –≤–µ—Å–Ω–∞" },
{ time: 62, text: "–Ü –¥—É—Ö –∑–∞—Ö–æ–ø–ª—é—î, –Ω–µ–º–æ–≤ –≤—ñ–¥ –≤–∏—Å–æ—Ç–∏" },
{ time: 68, text: "–Ü —Ç–∞–∫ –∂–∏–≤—É, –Ω–µ–º–æ–≤ –ª—ñ—Ç–∞—é —è, —Ç–∞–∫, –Ω–µ–º–æ–≤ –ª—ñ—Ç–∞—é —è" },
{ time: 77, text: "–ö–æ–∂–Ω—É –º–∏—Ç—å, –∫–æ–ª–∏ –∑—ñ –º–Ω–æ—é —Ç–∏" },
{ time: 82, text: "–£–Ω–æ—á—ñ —è —Ç–æ–±—ñ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥ –≥—ñ—Ç–∞—Ä—É" },
{ time: 88, text: "–ó–∞—Å–ø—ñ–≤–∞—é –≤—Å—ñ —Å–≤–æ—ó –ø—ñ—Å–Ω—ñ" },
{ time: 91, text: "–†–æ–∑–∫–∞–∂–∏, —á–æ–º—É –ª–∏—à–µ –ø—Ä–æ —Ç–µ–±–µ" },
{ time: 93, text: "–ù–∞–ø–∏—Å–∞–Ω—ñ –≤–æ–Ω–∏" },
{ time: 97, text: "–Ø —Ç–æ–±—ñ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥ –≥—ñ—Ç–∞—Ä—É" },
{ time: 100, text: "–ó–∞—Å–ø—ñ–≤–∞—é –∞–∂ –¥–æ —Ç–µ–º–Ω–æ—Ç–∏" },
{ time: 103, text: "–Ø–∫ –∑—ñ–∑–Ω–∞—Ç–∏—Å—è –≤ —Ü—å–æ–º—É, –Ω–µ –∑–Ω–∞—é" },
{ time: 106, text: "–Ü –∫–æ–ª–∏ –Ω–µ –∑–Ω–∞—é, —â–æ —Å–∫–∞–∑–∞—Ç–∏" },
{ time: 111, text: "–ö–æ–ª–∏ –Ω–µ –º–æ–∂—É –±—ñ–ª—å—à –¥—ñ–±—Ä–∞—Ç–∏ —Å–ª—ñ–≤" },
{ time: 114, text: "–ß–µ—Ä–µ–∑ –ø—ñ—Å–Ω—é –∫—Ä–∞—â–µ –ø–µ—Ä–µ–¥–∞—Ç–∏" },
{ time: 117, text: "–¢–µ, —â–æ —è –¥–∞–≤–Ω–æ —Ö–æ—Ç—ñ–≤" },
{ time: 120, text: "–ß–∏ –∑–Ω—ñ–º—É—Ç—å –ø—Ä–æ –Ω–∞—Å –∑ —Ç–æ–±–æ—é —Ñ—ñ–ª—å–º–∏" },
{ time: 122, text: "–ß–∏ –≤–∏–π–¥—É—Ç—å –Ω–µ–Ω–∞–ø–∏—Å–∞–Ω—ñ –≤—ñ—Ä—à—ñ" },
{ time: 126, text: "–ó–∞–ª–∏—à—É –ª–∏—à –Ω–∞ –ø–∞–º'—è—Ç—å –≤—Å–µ —É –ø—ñ—Å–Ω—ñ" },
{ time: 129, text: "–ó–∞—Å–ø—ñ–≤–∞—é —Ç—É—Ç —Ç–æ–±—ñ" },
{ time: 134, text: "–£–Ω–æ—á—ñ —è —Ç–æ–±—ñ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥ –≥—ñ—Ç–∞—Ä—É" },
{ time: 141, text: "–ó–∞—Å–ø—ñ–≤–∞—é –≤—Å—ñ —Å–≤–æ—ó –ø—ñ—Å–Ω—ñ" },
{ time: 144, text: "–†–æ–∑–∫–∞–∂–∏, —á–æ–º—É –ª–∏—à–µ –ø—Ä–æ —Ç–µ–±–µ" },
{ time: 148, text: "–ù–∞–ø–∏—Å–∞–Ω—ñ –≤–æ–Ω–∏" },
{ time: 150, text: "–Ø —Ç–æ–±—ñ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥ –≥—ñ—Ç–∞—Ä—É" },
{ time: 154, text: "–ó–∞—Å–ø—ñ–≤–∞—é –∞–∂ –¥–æ —Ç–µ–º–Ω–æ—Ç–∏" },
{ time: 157, text: "–Ø–∫ –∑—ñ–∑–Ω–∞—Ç–∏—Å—è –≤ —Ü—å–æ–º—É, –Ω–µ –∑–Ω–∞—é" },
{ time: 160, text: "–Ü —è –Ω–∞ –Ω–µ–±—ñ, –º–∏–ª–∞ –º–æ—è, –Ω–∞ –Ω–µ–±—ñ" },
{ time: 167, text: "–ó–æ—Ä–µ –º–æ—è, –Ω–∞ –Ω–µ–±—ñ, –≤—ñ–¥–∫–æ–ª–∏ —Ç–µ–±–µ –∑–Ω–∞–π—à–æ–≤" },
{ time: 172, text: "–Ü —è –Ω–∞ –Ω–µ–±—ñ, –º–æ–≤ –Ω–∞ –∑–µ–º–Ω–æ–º—É –Ω–µ–±—ñ" },
{ time: 179, text: "–ú–∏–ª–∞, –∫–æ–ª–∏ –∑ —Ç–æ–±–æ—é, –ª—ñ—Ç–∞—é —ñ –∑–Ω–æ–≤, —ñ –∑–Ω–æ–≤" },
{ time: 185, text: "–Ü —è –Ω–∞ –Ω–µ–±—ñ, –º–∏–ª–∞ –º–æ—è, –Ω–∞ –Ω–µ–±—ñ" },
{ time: 191, text: "–ó–æ—Ä–µ –º–æ—è, –Ω–∞ –Ω–µ–±—ñ, –≤—ñ–¥–∫–æ–ª–∏ —Ç–µ–±–µ –∑–Ω–∞–π—à–æ–≤" },
{ time: 197, text: "–Ü —è –Ω–∞ –Ω–µ–±—ñ, –º–æ–≤ –Ω–∞ –∑–µ–º–Ω–æ–º—É –Ω–µ–±—ñ" },
{ time: 203, text: "–ú–∏–ª–∞, –∫–æ–ª–∏ –∑ —Ç–æ–±–æ—é, –ª—ñ—Ç–∞—é —ñ –∑–Ω–æ–≤, —ñ –∑–Ω–æ–≤" },
{ time: 209, text: "–õ—ñ—Ç–∞—é —ñ –∑–Ω–æ–≤, —ñ –∑–Ω–æ–≤, –ª—ñ—Ç–∞—é —ñ –∑–Ω–æ–≤, —ñ –∑–Ω–æ–≤" }
                ]
            },
            {
                title: "SKOFKA - –ö—Ä—É–∑–∞–∫",
                videoId: "ZIOqT5e_JT0",
                thumb: "https://img.youtube.com/vi/6h1_9vJ0X0Y/default.jpg",
                lyrics: [
                    { time: 0, text: "üéµ (–ú—É–∑–∏—á–Ω–∏–π –≤—Å—Ç—É–ø) üéµ" },
                    { time: 23, text: "–ü–∞—Ü–∞–Ω –Ω–µ –ø—Ä–æ–ø–∞–¥–µ, –≤—ñ–Ω –∑–Ω–∞—î –≤ –ª—é–±—ñ–π —Å—Ä–∞—Üi –≤–∏—Ö—ñ–¥ —î" },
                    { time: 27, text: "–Ø–∫—â–æ —Å–æ–±–∞–∫–∞ —Ö–æ—á–µ –±–∞–±—É - –ø—Ä–æ–≥—Ä–∏–∑–µ –ª—é–±–∏–π –≤–æ–ª—å—î—Ä" },
                    { time: 30, text: "–ü–∞—Ü–∏–∫—É –±—É–ª–æ –± –¥–µ —Å–ø–∞—Ç—å –ø–æ –±–∞—Ä–∞–±–∞–Ω—É —ñ–Ω—Ç–µ—Ä'—î—Ä" },
                    { time: 34, text: "–•–æ—Å—Ç–µ–ª —Ç–æ —á–∏ –∫–æ–º–Ω–∞—Ç–∞ –¥–æ–±—Ä–µ wi-fi –Ω–∞ —à–∞—Ä—É —î!" },
                    { time: 38, text: "–ó–∞ –º–∏–ª—é —Ö–∞–ª—è–≤—É –ø–æ—á—É—î, –≥—Ä–∞–º–æ—Ç–Ω–æ —Å—è–¥–µ –Ω–∞ —Ö–≤—ñ—Å—Ç" },
                    { time: 42, text: "–ß–∞—Å–æ–º –ø–∞—Ü–∞–Ω—á–∏–∫, —è–∫ –≤–æ–≤–∫, —á–∞—Å–æ–º –≤—ñ–Ω, —è–∫ —Ö–∏—Ç—Ä–∏–π –ª–∏—Å" },
                    { time: 46, text: "–ê –∑–Ω–∞—î—à —Ö—Ç–æ —Ç–æ –ø—ñ–¥ –≤—ñ–∫–Ω–æ–º –≤–Ω–æ—á—ñ –Ω–∞–≤–∞–ª–∏–≤ –º—É–∑–∏–∫–∏?" },
                    { time: 50, text: "–ü–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏!" },
                    { time: 54, text: "üí• –¢–∞—Ä–∞–±–∞–Ω–∏—Ç—å –º—É–∑–∏–∫–∞ –≤ —á–æ—Ä–Ω–æ–º—É –∫—Ä—É–∑–∞–∫—É" },
                    { time: 57, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 62, text: "–ü–∞—Ü–∏–∫–∏ –Ω–∞ –ê–ó–ö –∑–∞—ó—Ö–∞–ª–∏ –Ω–∞ –ø–µ—Ä–µ–∫—É—Ä" },
                    { time: 66, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 70, text: "–¢–∞—Ä–∞–±–∞–Ω–∏—Ç—å –º—É–∑–∏–∫–∞ –≤ —á–æ—Ä–Ω–æ–º—É –∫—Ä—É–∑–∞–∫—É" },
                    { time: 73, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 77, text: "–ü–∞—Ü–∏–∫–∏ –Ω–∞ –ê–ó–ö –∑–∞—ó—Ö–∞–ª–∏ –Ω–∞ –ø–µ—Ä–µ–∫—É—Ä" },
                    { time: 81, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 85, text: "–ù–æ –ø–∞—Ü–∏–∫ –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ —Å—É—Ç—ñ! –ö–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ –≥–æ–ª–æ–≤–Ω–µ" },
                    { time: 89, text: "–ñ–∏–≥–∞ –±—É–∫—Å—É—î, –±–æ —Å–ª–∏–∑—å–∫–æ? –ë—É–¥–µ –π—Ç–∏ - –ø–∞—Ü–∏–∫ –ø–∏—Ö–Ω–µ" },
                    { time: 93, text: "–°–∞–ª—å—Ç—É—Ö—É –∑–∞–º—É—Ç–∏—Ç—å –∫—Ä–∞—Å–∏–≤—É, –∑ –º–æ—Å—Ç–∏–∫–∞ - —â—É—á–∫–æ–π –ø—ñ—Ä–Ω–µ" },
                    { time: 96, text: "–°–ø—Ä–∞–≤–∂–Ω—ñ–π –ø–∞—Ü–∞–Ω —á–µ—Ä–µ–∑ —Å–∏–ª—É, –Ω–æ —è–∫ –ø–æ–∑–∏—á–∏–≤ - –≤–µ—Ä–Ω–µ" },
                    { time: 100, text: "–ë–æ –ø–∞—Ü–∞–Ω—É –ø–æ —á–µ—Å–Ω–∞–∫—É –≤—Å–µ –¥—ñ–ª–∏—Ç—å—Å—è –Ω–∞ —á—É–≤–∞—ái" },
                    { time: 104, text: "–ß—É–≤–∞-—á—É–≤–∞—ái, —á—É–≤–∞—ái, —á—É–≤–∞-—á—É–≤–∞—ái" },
                    { time: 108, text: "–ê –∑–Ω–∞—î—à —Ö—Ç–æ —Ç–æ –ø—ñ–¥ –≤—ñ–∫–Ω–æ–º –≤–Ω–æ—á—ñ –Ω–∞–≤–∞–ª–∏–≤ –º—É–∑–∏–∫–∏?" },
                    { time: 112, text: "–ü–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏, –ø–∞—Ü–∏–∫–∏!" },
                    { time: 116, text: "üí• –¢–∞—Ä–∞–±–∞–Ω–∏—Ç—å –º—É–∑–∏–∫–∞ –≤ —á–æ—Ä–Ω–æ–º—É –∫—Ä—É–∑–∞–∫—É" },
                    { time: 120, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 123, text: "–ü–∞—Ü–∏–∫–∏ –Ω–∞ –ê–ó–ö –∑–∞—ó—Ö–∞–ª–∏ –Ω–∞ –ø–µ—Ä–µ–∫—É—Ä" },
                    { time: 127, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 131, text: "–¢–∞—Ä–∞–±–∞–Ω–∏—Ç—å –º—É–∑–∏–∫–∞ –≤ —á–æ—Ä–Ω–æ–º—É –∫—Ä—É–∑–∞–∫—É" },
                    { time: 135, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 139, text: "–ü–∞—Ü–∏–∫–∏ –Ω–∞ –ê–ó–ö –∑–∞—ó—Ö–∞–ª–∏ –Ω–∞ –ø–µ—Ä–µ–∫—É—Ä" },
                    { time: 143, text: "–ù–µ –Ω–∞–ª–∞–º—É–π –∫–∞–π—Ñ–∞, –±–æ —Ä–æ–∑–¥–∞–º —è–∫ wi-fi!" },
                    { time: 147, text: "üôå –¢—É—Ü —Ç–∏—Ü hands up, –¥–≤i–∂ –≥–æ—Ä–∏—Ç—å —è–∫ –±–µ–Ω–∑–∞!" },
                    { time: 150, text: "–¢—É—Ü —Ç–∏—Ü hands up! –¢—É—Ü —Ç–∏—Ü hands up!" },
                    { time: 154, text: "–¢—É—Ü —Ç–∏—Ü hands up, –¥–≤i–∂ –≥–æ—Ä–∏—Ç—å —è–∫ –±–µ–Ω–∑–∞!" },
                    { time: 158, text: "–¢—É—Ü —Ç–∏—Ü hands up! –¢—É—Ü —Ç–∏—Ü hands up!" },
                    { time: 162, text: "–¢—É—Ü —Ç–∏—Ü hands up! –¢—É—Ü —Ç–∏—Ü hands up!" },
                    { time: 166, text: "–¢—É—Ü —Ç–∏—Ü hands up! –¢—É—Ü —Ç–∏—Ü hands up!" },
                    { time: 170, text: "üéµ (–ö—ñ–Ω–µ—Ü—å –ø—ñ—Å–Ω—ñ) üéµ" }
                ]
            },
            {
                title: "–®—É–≥–∞—Ä - –û–ª—î–≥",
                videoId: "U5YFv7VxpYg", 
                thumb: "https://img.youtube.com/vi/wE_kOq-sWwI/default.jpg",
                lyrics: [
                    { time: 8, text: "–ê –≤–æ–Ω–∞ —è–∫ –≤–∏–≤—ñ—Å–∫–∞ —É–Ω—ñ–≤–µ—Ä–º–∞–≥—É" },
                    { time: 13, text: "–ü—Ä–∏–≤–µ—Ä—Ç–∞—î –≤—Å—é —É–≤–∞–≥—É" },
                    { time: 17, text: "–ê –≤–æ–Ω–∞ –Ω–µ–º–æ–≤ –Ω–æ–≤–µ–Ω—å–∫–∏–π –ì–µ–ª–µ–Ω–¥–≤–∞–≥–µ–Ω" },
                    { time: 22, text: "–ú–∞—î –ø–µ–≤–Ω—ñ –ø–µ—Ä–µ–≤–∞–≥–∏" },
                    { time: 25, text: "–í—ñ–Ω —ó—ó –ø–æ–±–∞—á–∏–≤ —ñ –∑ —Ç–∏—Ö –ø—ñ—Ä —Ç–∞–∫ —Å–∏–ª—å–Ω–æ —Å–µ—Ä—Ü–µ –±'—î" },
                    { time: 34, text: "–í—ñ–Ω –Ω–∞–≤–∞–∂–∏–≤—Å—è —ñ –∑–∞–ø—Ä–æ—Å–∏–≤ —ó—ó –Ω–∞ –∫—Ä–µ–º-–±—Ä—é–ª–µ" },
                    { time: 39, text: "üç¶ –í–æ–Ω–∞ –Ω–µ —Ö–æ—á–µ –∫—Ä–µ–º-–±—Ä—é–ª–µ" },
                    { time: 42, text: "–í –Ω–µ—ó —î –û–ª—î–≥, –≤ –Ω–µ—ó —î –û–ª—î–≥" },
                    { time: 48, text: "–í–æ–Ω–∞ –Ω–µ –π–¥–µ –Ω–∞ –¥–µ—Ñ—ñ–ª–µ" },
                    { time: 51, text: "–í –Ω–µ—ó —î –û–ª—î–≥, –≤ –Ω–µ—ó —î –û–ª—î–≥" },
                    { time: 58, text: "–ó–∞–ª–∏—à–∏ —Å–æ–±—ñ —Ü–µ–π —Ñ–ª—î–∫—Å" },
                    { time: 60, text: "–í–æ–Ω–∞ –Ω–µ –π–¥–µ –≤ –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å" },
                    { time: 62, text: "–ù–µ –≤—Ä–∞–∂–∞—î —Ç–≤—ñ–π –†–æ–ª—î–∫—Å" },
                    { time: 64, text: "–ë–æ —É –Ω–µ—ó —î –û–ª—î–∫—Å" },
                    { time: 67, text: "–í –Ω–µ—ó —î –û–ª—î–≥, –±–æ —É –Ω–µ—ó —î –û–ª—î–≥ (–û–ª—î–≥)" },
                    { time: 42, text: "–¢–æ–π, –∫–æ–º—É –Ω–µ —Å–∫–∞–∂–µ –Ω—ñ, –∞ —Ç–∏ –Ω–µ —Å–∫–∞–∂–µ–Ω—ñ–π" },
                    { time: 46, text: "–ó–∞–ª–∏—à–∏ —Å–æ–±—ñ —Ü–µ–π —Ñ–ª—î–∫—Å, –≤ –Ω–µ—ó —î –û–ª—î–∫—Å" },
                    { time: 74, text: "–¢–æ–π, –∫–æ–º—É –Ω–µ —Å–∫–∞–∂–µ –Ω—ñ, –∞ —Ç–∏ –Ω–µ —Å–∫–∞–∂–µ–Ω—ñ–π" },
                    { time: 79, text: "–ó–∞–ª–∏—à–∏ —Å–æ–±—ñ —Ü–µ–π —Ñ–ª—î–∫—Å, –≤ –Ω–µ—ó —î –û–ª—î–∫—Å" },
                    { time: 93, text: "–ê –≤—ñ–Ω —ó—ó –≤—Å—é–¥–∏ –∑–∞—Ö–∏—â–∞—î" },
                    { time: 96, text: "–ë–æ –≤—ñ–Ω –ø—Ä–æ –Ω–µ—ó –¥–±–∞—î" },
                    { time: 100, text: "–ê –≤—ñ–Ω –¥–æ –Ω–µ—ó –Ω–µ –ø—ñ–¥–ø—É—Å–∫–∞—î" },
                    { time: 104, text: "–ë–æ –≤—ñ–Ω —ó—ó –∫–æ—Ö–∞—î" },
                    { time: 108, text: "–ö–æ–∂–µ–Ω –¥–µ–Ω—å —É–≤–µ—á–µ—Ä—ñ —É —Ä–µ—Å—Ç–æ—Ä–∞–Ω —ó—ó –≤–µ–¥–µ" },
                    { time: 117, text: "–á–π –æ—Ñ—ñ—Ü—ñ–∞–Ω—Ç —Ä–µ–∫–æ–º–µ–Ω–¥—É—î –Ω–æ–≤–∏–π –∫—Ä–µ–º-–±—Ä—é–ª–µ" },
                    { time: 122, text: "üç¶ –í–æ–Ω–∞ –Ω–µ —Ö–æ—á–µ –∫—Ä–µ–º-–±—Ä—é–ª–µ" },
                    { time: 125, text: "–í –Ω–µ—ó —î –û–ª—î–≥, –≤ –Ω–µ—ó —î –û–ª—î–≥" },
                    { time: 130, text: "–í–æ–Ω–∞ –Ω–µ –π–¥–µ –Ω–∞ –¥–µ—Ñ—ñ–ª–µ" },
                    { time: 133, text: "–í –Ω–µ—ó —î –û–ª—î–≥, –≤ –Ω–µ—ó —î –û–ª—î–≥" },
                    { time: 140, text: "–ó–∞–ª–∏—à–∏ —Å–æ–±—ñ —Ü–µ–π —Ñ–ª—î–∫—Å" },
                    { time: 142, text: "–í–æ–Ω–∞ –Ω–µ –π–¥–µ –≤ –º—É–ª—å—Ç–∏–ø–ª—î–∫—Å" },
                    { time: 145, text: "–ù–µ –≤—Ä–∞–∂–∞—î —Ç–≤—ñ–π –†–æ–ª—î–∫—Å" },
                    { time: 146, text: "–ë–æ —É –Ω–µ—ó —î –û–ª—î–∫—Å" },
                    { time: 149, text: "–í –Ω–µ—ó —î –û–ª—î–≥, –±–æ —É –Ω–µ—ó —î –û–ª—î–≥ (–û–ª—î–≥)" },
                    { time: 157, text: "–¢–æ–π, –∫–æ–º—É –Ω–µ —Å–∫–∞–∂–µ –Ω—ñ, –∞ —Ç–∏ –Ω–µ —Å–∫–∞–∂–µ–Ω—ñ–π" },
                    { time: 162, text: "–ó–∞–ª–∏—à–∏ —Å–æ–±—ñ —Ü–µ–π —Ñ–ª—î–∫—Å, –≤ –Ω–µ—ó —î –û–ª—î–∫—Å" },
                    { time: 165, text: "–¢–æ–π, –∫–æ–º—É –Ω–µ —Å–∫–∞–∂–µ –Ω—ñ, –∞ —Ç–∏ –Ω–µ —Å–∫–∞–∂–µ–Ω—ñ–π" },
                    { time: 169, text: "–ó–∞–ª–∏—à–∏ —Å–æ–±—ñ —Ü–µ–π —Ñ–ª—î–∫—Å, –≤ –Ω–µ—ó —î –û–ª—î–∫—Å" }
                ]
            },
            {
                title: "–®—É–≥–∞—Ä - –¢—å–æ—Ç—è",
                videoId: "DFGO4OuvVM0", 
                thumb: "https://img.youtube.com/vi/G7Xl1_s8sWc/default.jpg",
                lyrics: [
                   { time: 0, text: "–í–æ–Ω–∞ –≤—ñ–¥–ø–æ—á–∏–≤–∞—î" },
{ time: 4, text: "–¶–µ–π –≤–µ—á—ñ—Ä" },
{ time: 6, text: "–¶—ñ –Ω–æ—á—ñ" },
{ time: 8, text: "–¶—è —Ç—å–æ—Ç—è –¥–æ–±—Ä–µ –∑–Ω–∞—î" },
{ time: 12, text: "–®–æ —Ö–æ—á–µ" },
{ time: 16, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ —Ç—Ä–æ—à–∫–∏ —Ä–æ–∑—Å–ª–∞–±–∏—Ç–∏—Å—å" },
{ time: 20, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ –∫—Ä–∏–ª–∞ —Ä–æ–∑–ø—Ä–∞–≤–∏—Ç–∏" },
{ time: 25, text: "–í–æ–Ω–∞ –ø—Ä–∏–π—à–ª–∞ —Å—é–¥–∏ –ø–æ–≤–∞–π–±–∏—Ç–∏" },
{ time: 28, text: "–í –Ω–µ—ó –≤–∏—Ö—ñ–¥–Ω–∏–π" },
{ time: 30, text: "–í –Ω–µ—ó –≤–∏—Ö—ñ–¥–Ω–∏–π" },
{ time: 33, text: "–í–æ–Ω–∞ –≤—ñ–¥–ø–æ—á–∏–≤–∞—î" },
{ time: 37, text: "–¶–µ–π –≤–µ—á—ñ—Ä" },
{ time: 39, text: "–¶—ñ –Ω–æ—á—ñ" },
{ time: 41, text: "–¶—è —Ç—å–æ—Ç—è –¥–æ–±—Ä–µ –∑–Ω–∞—î" },
{ time: 45, text: "–®–æ —Ö–æ—á–µ" },
{ time: 48, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ –¥—è–¥—é" },
{ time: 52, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ –∫—Ä–µ–ø–∫–æ–≥–æ —Å–æ–ª—ñ–¥–Ω–æ–≥–æ –¥—è–¥—é (–î—è–¥—é)" },
{ time: 56, text: "–¢—å–æ—Ç—è –Ω–∞ –∑–∞—Ä—è–¥—ñ" },
{ time: 60, text: "–¶–µ—ó –Ω–æ—á—ñ –≤ —Ç—å–æ—Ç—ñ –≤—Å–µ –±—É–¥–µ –≤ —à–æ–∫–æ–ª–∞–¥—ñ" },
{ time: 65, text: "–ê —Ü—ñ –ø—ñ–¥–±–æ—Ä—ñ –æ–∫—É–ø–∏–ª–∏" },
{ time: 68, text: "–°–µ–±–µ –≤ –ø–µ—Ä—à—É –≥–æ–¥–∏–Ω—É" },
{ time: 69, text: "–í–æ–Ω–∞ –≤–∫–ª–∞–¥–∞—î –≤ —Å–µ–±–µ, –Ω—ñ–±–∏" },
{ time: 71, text: "–í –¥–æ—Ä–æ–≥—É—â—É –º–∞—à–∏–Ω—É" },
{ time: 73, text: "–í–æ–Ω–∞ —Ö–æ—á–µ –º—É–∂—á–∏–Ω—É" },
{ time: 76, text: "–¶—è —Ç—å–æ—Ç—è —Ö–æ—á–µ –º—É–∂—á–∏–Ω—É" },
{ time: 82, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ –¥—è–¥—é" },
{ time: 99, text: "–ö–æ–ª–∏ –≤—Å—ñ –ø–æ–¥—Ä—É–≥–∏ –≤–∂–µ –¥–æ–º–∞ —Å–ø–ª—è—Ç—å" },
{ time: 105, text: "–ê —ó—ó –Ω—ñ—á—å –∑–∞–±–∏—Ä–∞—î" },
{ time: 108, text: "–í–Ü–¥ –π–æ–≥–æ –¥–æ—Ç–∏–∫—ñ–≤ —Ä—É–∫–∏ —Ç—Ä–µ–º—Ç—è—Ç—å" },
{ time: 112, text: "–í–æ–Ω–∞ –π–æ–≥–æ –æ–±–∏—Ä–∞—î" },
{ time: 116, text: "–í–æ–Ω–∞ –≤—ñ–¥–ø–æ—á–∏–≤–∞—î" },
{ time: 120, text: "–¶–µ–π –≤–µ—á—ñ—Ä" },
{ time: 122, text: "–¶—ñ –Ω–æ—á—ñ" },
{ time: 125, text: "–¶—è —Ç—å–æ—Ç—è –¥–æ–±—Ä–µ –∑–Ω–∞—î" },
{ time: 129, text: "–®–æ —Ö–æ—á–µ" },
{ time: 132, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ –¥—è–¥—é" },
{ time: 134, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ –∫—Ä–µ–ø–∫–æ–≥–æ —Å–æ–ª—ñ–¥–Ω–æ–≥–æ –¥—è–¥—é (–î—è–¥—é)" },
{ time: 139, text: "–¢—å–æ—Ç—è –Ω–∞ –∑–∞—Ä—è–¥—ñ" },
{ time: 144, text: "–¶–µ—ó –Ω–æ—á—ñ –≤ —Ç—å–æ—Ç—ñ –≤—Å–µ –±—É–¥–µ –≤ —à–æ–∫–æ–ª–∞–¥—ñ" },
{ time: 148, text: "–ê —Ü—ñ –ø—ñ–¥–±–æ—Ä—ñ –æ–∫—É–ø–∏–ª–∏" },
{ time: 150, text: "–°–µ–±–µ –≤ –ø–µ—Ä—à—É –≥–æ–¥–∏–Ω—É" },
{ time: 153, text: "–í–æ–Ω–∞ –≤–∫–ª–∞–¥–∞—î –≤ —Å–µ–±–µ, –Ω—ñ–±–∏" },
{ time: 155, text: "–í –¥–æ—Ä–æ–≥—É—â—É –º–∞—à–∏–Ω—É" },
{ time: 158, text: "–í–æ–Ω–∞ —Ö–æ—á–µ –º—É–∂—á–∏–Ω—É" },
{ time: 160, text: "–¶—è —Ç—å–æ—Ç—è —Ö–æ—á–µ –º—É–∂—á–∏–Ω—É" },
{ time: 164, text: "–¢—å–æ—Ç—è —Ö–æ—á–µ –¥—è–¥—é" },
{ time: 167, text: "–¢—å–æ—Ç—è" }
                ]
            },
            {
                title: "BESSMERTNII - –ó–ê –î–£–®–£",
                videoId: "0_eGVKyWGAw", 
                thumb: "https://img.youtube.com/vi/w3Z8q0l8j0k/default.jpg",
                lyrics: [
                    
                ]
            }
        ];

        // === 2. –õ–û–ì–Ü–ö–ê –î–û–î–ê–¢–ö–£ ===
        const socket = io('https://karaoke-dk7o.onrender.com');
        let player;
        let myRoom = "";
        let currentSong = null;
        let syncInterval;

        function joinRoom() {
            const name = document.getElementById('username').value;
            myRoom = document.getElementById('room').value;
            if(name && myRoom) {
                document.getElementById('login-screen').classList.remove('active');
                document.getElementById('app-screen').classList.add('active');
                document.getElementById('room-display').innerText = `–ö—ñ–º–Ω–∞—Ç–∞: ${myRoom} | –Æ–∑–µ—Ä: ${name}`;
                
                socket.emit('joinRoom', { username: name, room: myRoom });
                initYouTube();
                renderSongList();
            }
        }

        // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –ø—ñ—Å–µ–Ω—å –∑–ª—ñ–≤–∞
        function renderSongList() {
            const container = document.getElementById('song-list');
            SONG_LIBRARY.forEach((song, index) => {
                const div = document.createElement('div');
                div.className = 'song-item';
                div.innerHTML = `<img src="${song.thumb}"> <span>${song.title}</span>`;
                div.onclick = () => selectSong(index);
                container.appendChild(div);
            });
        }

        function selectSong(index) {
            socket.emit('changeSong', { room: myRoom, songIndex: index });
        }

        // === 3. YOUTUBE API ===
        function initYouTube() {
            const tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            document.body.appendChild(tag);
        }

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%', width: '100%',
                playerVars: { 'controls': 1, 'rel': 0 },
                events: { 'onStateChange': onPlayerStateChange }
            });
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) socket.emit('playerStateChange', { room: myRoom, state: 'play' });
            if (event.data == YT.PlayerState.PAUSED) socket.emit('playerStateChange', { room: myRoom, state: 'pause' });
        }

        // === 4. –ö–ê–†–ê–û–ö–ï –î–í–ò–ì–£–ù ===
        function startKaraokeEngine() {
            if (syncInterval) clearInterval(syncInterval);
            
            const lyricsContainer = document.getElementById('lyrics-box');
            
            // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–∞—Å—É (–∫–æ–∂–Ω—ñ 100–º—Å)
            syncInterval = setInterval(() => {
                if (!player || !player.getCurrentTime) return;
                
                const currentTime = player.getCurrentTime();
                
                // –ó–Ω–∞—Ö–æ–¥–∏–º–æ –∞–∫—Ç–∏–≤–Ω–∏–π —Ä—è–¥–æ–∫
                let activeIndex = -1;
                for (let i = 0; i < currentSong.lyrics.length; i++) {
                    if (currentTime >= currentSong.lyrics[i].time) {
                        activeIndex = i;
                    } else {
                        break;
                    }
                }

                // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∏–ª—ñ
                const lines = document.querySelectorAll('.lyric-line');
                lines.forEach((line, idx) => {
                    if (idx === activeIndex) {
                        if (!line.classList.contains('active')) {
                            line.classList.add('active');
                            // –ê–í–¢–û-–°–ö–†–û–õ
                            line.scrollIntoView({ behavior: "smooth", block: "center" });
                        }
                    } else {
                        line.classList.remove('active');
                    }
                });

            }, 100);
        }

        // === 5. SOCKET –û–ë–†–û–ë–ù–ò–ö–ò ===
        socket.on('playSong', (index) => {
            currentSong = SONG_LIBRARY[index];
            
            // 1. –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –≤—ñ–¥–µ–æ
            player.loadVideoById(currentSong.videoId);
            
            // 2. –ë—É–¥—É—î–º–æ HTML –¥–ª—è —Ç–µ–∫—Å—Ç—É
            const box = document.getElementById('lyrics-box');
            box.innerHTML = ""; // –û—á–∏—Å—Ç–∏—Ç–∏
            // –î–æ–¥–∞—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π –≤—ñ–¥—Å—Ç—É–ø –∑–≤–µ—Ä—Ö—É, —â–æ–± —Ç–µ–∫—Å—Ç –±—É–≤ –ø–æ —Ü–µ–Ω—Ç—Ä—É
            box.innerHTML += `<div style="height: 40%;"></div>`;
            
            currentSong.lyrics.forEach(line => {
                const div = document.createElement('div');
                div.className = 'lyric-line';
                div.innerText = line.text;
                box.appendChild(div);
            });

            box.innerHTML += `<div style="height: 40%;"></div>`;
            
            // 3. –ó–∞–ø—É—Å–∫–∞—î–º–æ –¥–≤–∏–≥—É–Ω
            startKaraokeEngine();
        });

        socket.on('syncState', (state) => {
            if (state === 'play') player.playVideo();
            if (state === 'pause') player.pauseVideo();
        });

    </script>
</body>

</html>
